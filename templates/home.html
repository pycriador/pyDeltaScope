{% extends "base.html" %}

{% block title %}Início - DeltaScope{% endblock %}

{% block content %}
<div id="homeSection">
    <div class="text-center py-5">
        <div class="mb-4">
            <i class="fas fa-home fa-4x text-primary mb-3"></i>
        </div>
        <h1 class="display-4 mb-3">Bem-vindo ao DeltaScope</h1>
        <p class="lead text-muted mb-4">Sistema de Comparação de Tabelas</p>
        
        {% if not has_any_permission %}
        <div class="alert alert-info mx-auto" style="max-width: 600px;">
            <i class="fas fa-info-circle me-2"></i>
            <strong>Conta criada com sucesso!</strong><br>
            Sua conta está ativa, mas você ainda não possui permissões para acessar as funcionalidades do sistema.
            Entre em contato com um administrador para solicitar permissões.
        </div>
        
        <div class="mt-4">
            <a href="/api-docs" class="btn btn-outline-primary me-2" target="_blank">
                <i class="fas fa-book me-2"></i>Ver Documentação da API
            </a>
            <a href="/api/auth/logout" class="btn btn-outline-secondary" onclick="handleLogout(event);">
                <i class="fas fa-sign-out-alt me-2"></i>Sair
            </a>
        </div>
        {% else %}
        <div class="row mt-5">
            <div class="col-md-4 mb-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body text-center">
                        <i class="fas fa-database fa-3x text-primary mb-3"></i>
                        <h5 class="card-title">Conexões</h5>
                        <p class="card-text text-muted">Gerencie suas conexões de banco de dados</p>
                        <a href="/conexoes" class="btn btn-primary">Acessar</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body text-center">
                        <i class="fas fa-folder fa-3x text-success mb-3"></i>
                        <h5 class="card-title">Projetos</h5>
                        <p class="card-text text-muted">Crie e gerencie projetos de comparação</p>
                        <a href="/projetos" class="btn btn-success">Acessar</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body text-center">
                        <i class="fas fa-chart-bar fa-3x text-info mb-3"></i>
                        <h5 class="card-title">Dashboard</h5>
                        <p class="card-text text-muted">Visualize estatísticas e métricas</p>
                        <a href="/dashboard" class="btn btn-info">Acessar</a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Handle logout from template pages
    function handleLogout(e) {
        e.preventDefault();
        fetch('/api/auth/logout', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            }
        }).then(() => {
            // Clear any localStorage
            try {
                localStorage.clear();
                sessionStorage.clear();
            } catch (error) {
                console.error('Error clearing storage:', error);
            }
            // Redirect to login
            window.location.href = '/login';
        }).catch(error => {
            console.error('Error logging out:', error);
            // Redirect anyway
            window.location.href = '/login';
        });
    }
</script>
{% endblock %}

